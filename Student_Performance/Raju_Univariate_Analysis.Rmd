---
title: "Univariate Analysis - Student Performance Dataset"
author: "Raju Ahmed"
date: "2025-12-27"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(readr)
library(dplyr)
library(ggplot2)
library(knitr)
library(gridExtra)
```

# 1. Introduction

In this document, I present my univariate analysis for the Student Performance dataset covering: **Binary Variables** (sex, paid, activities, higher, internet), **Ordinal Variables** (Medu, famrel), **Numeric Variable** (age), and one **Bivariate Analysis** (Medu vs G3).

# 2. Data Loading

```{r load-data, echo=TRUE}
data <- read_csv("student-mat-selected.csv")
cat("Dataset:", nrow(data), "rows x", ncol(data), "columns\n")
```

# 3. Binary Variables

```{r binary-summary-table}
binary_summary <- data.frame(
  Variable = c("sex (F/M)", "paid", "activities", "higher", "internet"),
  Yes_n = c(sum(data$sex == "F"), sum(data$paid == "yes"), sum(data$activities == "yes"),
            sum(data$higher == "yes"), sum(data$internet == "yes")),
  Yes_pct = c(round(mean(data$sex == "F")*100,1), round(mean(data$paid == "yes")*100,1),
              round(mean(data$activities == "yes")*100,1), round(mean(data$higher == "yes")*100,1),
              round(mean(data$internet == "yes")*100,1)),
  No_n = c(sum(data$sex == "M"), sum(data$paid == "no"), sum(data$activities == "no"),
           sum(data$higher == "no"), sum(data$internet == "no")),
  Mode = c("F", "no", "yes", "yes", "yes")
)
kable(binary_summary, caption = "Binary Variables Summary", col.names = c("Variable", "Yes/F (n)", "Yes/F (%)", "No/M (n)", "Mode"))
```

```{r binary-plot, fig.width=9, fig.height=3.5}
binary_data <- data.frame(
  Variable = factor(c("Sex (F)", "Paid", "Activities", "Higher Ed", "Internet"),
                    levels = c("Sex (F)", "Paid", "Activities", "Higher Ed", "Internet")),
  Percentage = c(mean(data$sex == "F")*100, mean(data$paid == "yes")*100,
                 mean(data$activities == "yes")*100, mean(data$higher == "yes")*100,
                 mean(data$internet == "yes")*100)
)
ggplot(binary_data, aes(x = Variable, y = Percentage, fill = Variable)) +
  geom_bar(stat = "identity", width = 0.7) +
  geom_text(aes(label = paste0(round(Percentage, 1), "%")), vjust = -0.5, size = 3.5) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15)), limits = c(0, 100)) +
  scale_fill_brewer(palette = "Set2") +
  labs(title = "Binary Variables Distribution", x = "", y = "Percentage (%)") +
  theme_minimal() + theme(legend.position = "none")
```

**Interpretation:** Sex is balanced (52.7% female). 45.8% take paid classes, 50.9% do activities, 94.9% want higher education, 83.3% have internet.

# 4. Ordinal Variables

```{r ordinal-table}
ordinal_summary <- data.frame(
  Variable = c("Medu (0-4)", "famrel (1-5)"),
  Mode = c(names(which.max(table(data$Medu))), names(which.max(table(data$famrel)))),
  Median = c(median(data$Medu), median(data$famrel)),
  Distribution = c("3>59, 103>99>131 (skewed to higher)", "4>195, 5>86 (mostly good)")
)
kable(ordinal_summary, caption = "Ordinal Variables Summary")
```

```{r ordinal-plots, fig.width=10, fig.height=3.5}
p1 <- ggplot(data, aes(x = factor(Medu), fill = factor(Medu))) +
  geom_bar() + geom_text(stat = "count", aes(label = ..count..), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Blues") +
  scale_x_discrete(labels = c("0", "1", "2", "3", "4")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Mother's Education (Medu)", x = "Level (0=none to 4=higher)", y = "Count") +
  theme_minimal() + theme(legend.position = "none")

p2 <- ggplot(data, aes(x = factor(famrel), fill = factor(famrel))) +
  geom_bar() + geom_text(stat = "count", aes(label = ..count..), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Greens") +
  scale_x_discrete(labels = c("1", "2", "3", "4", "5")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Family Relationships (famrel)", x = "Quality (1=bad to 5=excellent)", y = "Count") +
  theme_minimal() + theme(legend.position = "none")

grid.arrange(p1, p2, ncol = 2)
```

**Interpretation:** Medu mode=4 (higher ed), median=3. Most mothers have secondary or higher education. Famrel mode=4 (good), median=4. Most students report good family relationships.

# 5. Numeric Variable: Age

```{r age-stats}
cat("Mean:", round(mean(data$age), 2), "| Median:", median(data$age), "| Mode:", names(which.max(table(data$age))),
    "| SD:", round(sd(data$age), 2), "| Range:", min(data$age), "-", max(data$age), "| IQR:", IQR(data$age), "\n")
```

```{r age-plots, fig.width=10, fig.height=3}
p1 <- ggplot(data, aes(x = age)) +
  geom_histogram(binwidth = 1, fill = "steelblue", color = "white") +
  geom_vline(aes(xintercept = mean(age)), color = "red", linetype = "dashed") +
  labs(title = "Age Distribution", subtitle = "Red=Mean", x = "Age", y = "Count") +
  scale_x_continuous(breaks = 15:22) + theme_minimal()

p2 <- ggplot(data, aes(x = "", y = age)) +
  geom_boxplot(fill = "steelblue", alpha = 0.7) +
  labs(title = "Age Boxplot", x = "", y = "Age") + theme_minimal()

grid.arrange(p1, p2, ncol = 2, widths = c(2, 1))
```

**Interpretation:** Ages 15-22, mean=16.7, median=17, mode=16. Slightly right-skewed with some older students.

# 6. Bivariate: Mother's Education vs Final Grade

```{r bivariate-stats}
bivariate_stats <- data %>% group_by(Medu) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), SD = round(sd(G3), 2), .groups = "drop")
kable(bivariate_stats, caption = "G3 by Medu Level")

spearman_cor <- cor(data$Medu, data$G3, method = "spearman")
cat("Spearman r =", round(spearman_cor, 3), "\n")
```

```{r bivariate-plot, fig.width=9, fig.height=4}
ggplot(data, aes(x = factor(Medu), y = G3, fill = factor(Medu))) +
  geom_boxplot() +
  scale_fill_brewer(palette = "Blues") +
  scale_x_discrete(labels = c("0:None", "1:Primary", "2:5th-9th", "3:Secondary", "4:Higher")) +
  labs(title = "Final Grade by Mother's Education", subtitle = paste("Spearman r =", round(spearman_cor, 3)),
       x = "Mother's Education", y = "Final Grade (G3)") +
  theme_minimal() + theme(legend.position = "none", axis.text.x = element_text(angle = 30, hjust = 1))
```

**Interpretation:** Positive correlation (r=0.225). Medu=0 has high mean (13.0) but only n=3 - small sample artifact. Excluding Medu=0, clear trend: grades increase from 8.68 (level 1) to 11.76 (level 4). Mother's education is a meaningful predictor of student performance.
