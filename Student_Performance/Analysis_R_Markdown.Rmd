---
title: "Univariate Analysis - Student Performance Dataset"
author: "Kezia Fernandes, Raju Ahmed, Melisa Cihan, Hrusheekesh Sawarkar"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
    toc_depth: 1
    number_sections: true
fontsize: 11pt
geometry: margin=0.6in
bibliography: references.bib
header-includes:
  - \usepackage{float}
  - \floatplacement{figure}{H}
  - \usepackage{titlesec}
  - \titlespacing{\section}{0pt}{18pt plus 2pt minus 2pt}{8pt plus 2pt minus 2pt}
  - \titlespacing{\subsection}{0pt}{12pt plus 2pt minus 2pt}{6pt plus 2pt minus 2pt}
  - \usepackage{parskip}
  - \setlength{\parskip}{8pt}
  - \usepackage{tocloft}
  - \renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
  - \setlength{\cftbeforesecskip}{4pt}
  - \usepackage{caption}
  - \captionsetup[figure]{skip=8pt}
---
 
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE,
                      fig.width = 5, fig.height = 2.5, fig.pos = 'H', dpi = 300)
options(knitr.kable.NA = '-')
```
 
```{r load-data, include=FALSE}
# Load required libraries
library(dplyr)
library(ggplot2)
library(moments)
library(knitr)
library(gridExtra)
library(grid)
 
# Load dataset
df <- read.csv("student-mat-selected.csv", stringsAsFactors = FALSE)
```
 
# Introduction
 
This dataset originates from the secondary education domain and focuses on analyzing factors associated with student academic performance in Mathematics at two Portuguese secondary schools [@cortez2008student; @cortez2008using]. The data capture multiple dimensions of a student’s profile, combining academic outcomes, demographic characteristics, and socio-educational factors. Information was collected through a combination of school records (such as grades and absences) and student questionnaires, providing both objective and self-reported measures relevant to educational performance.
 
For this analysis, a subset of 13 variables was selected to reflect key aspects influencing student achievement while maintaining analytical clarity. These variables include demographic attributes (sex, age), family and background indicators (mother’s education level, quality of family relationships), school-related factors (study time, travel time, past failures, absences), support and engagement variables (paid classes, extracurricular activities, internet access), educational aspirations (desire for higher education), and the final Mathematics grade (G3) as the outcome variable.
 
The dataset contains a mix of binary nominal variables (e.g., sex, internet access), ordinal categorical variables (e.g., study time, travel time, family relationship quality), and numeric discrete variables (e.g., age, failures, absences). The final grade (G3), measured on a scale from 0 to 20, is treated as a continuous numeric variable. This structure makes the dataset well suited for univariate statistical analysis, allowing for an initial exploration of distributions, central tendencies, and variability across different types of educational and socio-demographic factors.
 
# Continuous Variable: G3 (Final Grade)
 
## Descriptive Statistics
 
```{r g3-stats, results='asis'}
cat("Total =", length(df$G3), "$\\mid$",
    "Mean =", round(mean(df$G3), 2), "$\\mid$",
    "Median =", median(df$G3), "$\\mid$",
    "Mode =", names(which.max(table(df$G3))), "$\\mid$",
    "SD =", round(sd(df$G3), 2), "$\\mid$",
    "Variance =", round(var(df$G3), 2), "$\\mid$",
    "CV =", round(sd(df$G3)/mean(df$G3), 3), "  \n\n")
 
cat("Five-Number Summary:  \n")
cat("Min =", min(df$G3), "$\\mid$",
    "Q1 =", quantile(df$G3, 0.25), "$\\mid$",
    "Median =", median(df$G3), "$\\mid$",
    "Q3 =", quantile(df$G3, 0.75), "$\\mid$",
    "Max =", max(df$G3), "$\\mid$",
    "IQR =", IQR(df$G3), "  \n\n")
 
cat("Shape:  \n")
cat("Skewness =", round(skewness(df$G3), 3), "  \n")
```
 
## Visualization
 
```{r g3-histogram, fig.cap="Distribution of Final Grades showing left skewness", fig.height=2.5}
g3_mean <- mean(df$G3)
g3_median <- median(df$G3)
 
ggplot(df, aes(x = G3)) +
  geom_histogram(aes(y = ..density..), binwidth = 1, fill = "steelblue",
                 color = "white", alpha = 0.7) +
  geom_density(color = "darkblue", size = 1) +
  geom_vline(aes(xintercept = g3_mean), color = "red", linetype = "dashed", size = 1) +
  geom_vline(aes(xintercept = g3_median), color = "green", linetype = "dashed", size = 1) +
  labs(title = "Distribution of Final Grades (G3)",
       subtitle = "Red = Mean (10.42) | Green = Median (11)",
       x = "Final Grade (0-20)", y = "Density") +
  scale_x_continuous(breaks = seq(0, 20, 2)) +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
```
 
## Interpretation
 
The mean final grade is 10.42 with median of 11. The SD of 4.58 shows considerable variability (CV = 0.44). The skewness of -0.73 indicates a left-skewed distribution with more high-performing students. Grades span 0 to 20, with 50% scoring between 8 and 14 (IQR = 6).
 
# Numeric Discrete Variable: Absences
 
## Descriptive Statistics
 
```{r absences-stats, results='asis'}
cat("N =", length(df$absences), "$\\mid$",
    "Mean =", round(mean(df$absences), 2), "$\\mid$",
    "Median =", median(df$absences), "$\\mid$",
    "Mode =", names(which.max(table(df$absences))), "$\\mid$",
    "SD =", round(sd(df$absences), 2), "$\\mid$",
    "Variance =", round(var(df$absences), 2), "$\\mid$",
    "CV =", round(sd(df$absences)/mean(df$absences), 3), "  \n\n")
 
cat("Five-Number Summary:  \n")
cat("Min =", min(df$absences), "$\\mid$",
    "Q1 =", quantile(df$absences, 0.25), "$\\mid$",
    "Median =", median(df$absences), "$\\mid$",
    "Q3 =", quantile(df$absences, 0.75), "$\\mid$",
    "Max =", max(df$absences), "$\\mid$",
    "IQR =", IQR(df$absences), "  \n\n")
 
cat("Shape:  \n")
cat("Skewness =", round(skewness(df$absences), 3), "$\\mid$",
    "Zero absences:", round((sum(df$absences == 0)/length(df$absences))*100, 1), "\\%  \n")
```
 
## Visualization
 
```{r absences-plots, fig.cap="Distribution and outliers in student absences", fig.height=2.5, fig.width=7}
abs_mean <- mean(df$absences)
abs_median <- median(df$absences)
 
p1 <- ggplot(df, aes(x = absences)) +
  geom_histogram(binwidth = 2, fill = "salmon", color = "white", alpha = 0.7) +
  geom_vline(aes(xintercept = abs_mean), color = "red", linetype = "dashed", size = 1) +
  geom_vline(aes(xintercept = abs_median), color = "green", linetype = "dashed", size = 1) +
  labs(title = "Distribution of Student Absences",
       subtitle = "Red = Mean (5.71) | Green = Median (4)",
       x = "Number of Absences", y = "Frequency") +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
 
p2 <- ggplot(df, aes(x = "", y = absences)) +
  geom_boxplot(fill = "salmon", alpha = 0.7, outlier.color = "red", outlier.size = 2) +
  labs(title = "Boxplot of Absences", y = "Number of Absences", x = "") +
  theme_minimal() +
  theme(axis.text.x = element_blank(), axis.ticks.x = element_blank(),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))
 
grid.arrange(p1, p2, ncol = 2, widths = c(2, 1))
```
 
## Interpretation
 
Students average 5.71 absences with median of 4, but mode is 0 (29.1% had perfect attendance). The SD of 8.0 is notably large with CV = 1.402, indicating extremely high variability. The skewness of 3.658 shows an extremely right-skewed distribution. Absences range from 0 to 75, with 50% having 0-8 absences (IQR = 8).
 
# Numeric Discrete Variable: Failures
 
## Descriptive Statistics
 
```{r failures-stats, results='asis'}
cat("N =", length(df$failures), "$\\mid$",
    "Mean =", round(mean(df$failures), 2), "$\\mid$",
    "Median =", median(df$failures), "$\\mid$",
    "Mode =", names(which.max(table(df$failures))), "$\\mid$",
    "SD =", round(sd(df$failures), 2), "$\\mid$",
    "Variance =", round(var(df$failures), 2), "$\\mid$",
    "Range =", paste(min(df$failures), "-", max(df$failures)), "  \n")
```
 
## Frequency Distribution & Visualization
 
```{r failures-combined,fig.cap="Frequency distribution and visualization of past class failures", fig.height=3, fig.width=9}
 
failures_freq <- data.frame(
  Failures = names(table(df$failures)),
  Count = as.vector(table(df$failures)),
  Percentage = round(as.vector(prop.table(table(df$failures))) * 100, 2),
  Cumulative = round(cumsum(as.vector(prop.table(table(df$failures)))) * 100, 2)
)
 
# Create table grob with smaller font
table_grob <- tableGrob(failures_freq, rows = NULL,
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7)),
                          rowhead = list(fg_params = list(cex = 0.65))
                        ))
 
# Create plot
plot_grob <- ggplotGrob(
  ggplot(df, aes(x = factor(failures))) +
    geom_bar(fill = "darkred", color = "white", alpha = 0.7) +
    geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3.5) +
    labs(title = "Distribution of Past Class Failures",
         x = "Number of Past Failures", y = "Frequency") +
    scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
    theme_minimal() +
    theme(plot.title = element_text(size = 10),
          axis.title = element_text(size = 9))
)
 
# Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```
 
 
## Interpretation
 
Mean is 0.33 failures with median and mode of 0. An impressive 78.99% have never failed a class. Only 8.35% have failed 2+ classes, representing a small at-risk group. The SD of 0.74 indicates limited variability.
 
# Ordinal Variable: Study Time
 
**Study time categories:** 1 = <2 hours/week, 2 = 2-5 hours, 3 = 5-10 hours, 4 = >10 hours.
 
## Frequency Distribution & Visualization
```{r studytime-combined,fig.cap="Frequency distribution and visualization of weekly study time", fig.height=3, fig.width=9}
studytime_freq <- data.frame(
  Category = names(table(df$studytime)),
  Count = as.vector(table(df$studytime)),
  Percentage = round(as.vector(prop.table(table(df$studytime))) * 100, 2),
  Cumulative = round(cumsum(as.vector(prop.table(table(df$studytime)))) * 100, 2)
)
 
studytime_labels <- c("1: <2 hrs", "2: 2-5 hrs", "3: 5-10 hrs", "4: >10 hrs")
 
# Create table grob with smaller font
table_grob <- tableGrob(studytime_freq, rows = NULL,
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7)),
                          rowhead = list(fg_params = list(cex = 0.65))
                        ))
 
# Create plot
plot_grob <- ggplotGrob(
  ggplot(df, aes(x = factor(studytime))) +
    geom_bar(fill = "mediumpurple", color = "white", alpha = 0.7) +
    geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3.5) +
    scale_x_discrete(labels = studytime_labels) +
    labs(title = "Distribution of Weekly Study Time", x = "Study Time Category", y = "Frequency") +
    scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
    theme_minimal() +
    theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 8),
          plot.title = element_text(size = 10),
          axis.title = element_text(size = 9))
)
 
# Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```
 
**Study Time - Central Tendency:**  
Mode = `r names(which.max(table(df$studytime)))` | Median = `r median(df$studytime)`
 
## Interpretation
 
Most common is category 2 (2-5 hours/week) with 50.13% of students. Over 26% study <2 hours weekly (potentially insufficient). Only 6.84% study >10 hours. Median of 2 confirms typical student studies 2-5 hours weekly.
 
# Binary Variables (Raju): Paid Extra Classes, Higher Education Aspiration, Internet Access

## Frequency Distribution & Visualization

```{r raju-binary-combined, fig.width=7, fig.height=2.5, fig.pos='H', fig.cap="Binary Variables - Grouped Bar Chart"}
# Create grouped bar chart data
binary_long <- data.frame(
  Variable = rep(c("Paid Extra\nClasses", "Higher Education\nAspiration", "Internet\nAccess"), each = 2),
  Response = rep(c("Yes", "No"), 3),
  Count = c(sum(df$paid == "yes"), sum(df$paid == "no"),
            sum(df$higher == "yes"), sum(df$higher == "no"),
            sum(df$internet == "yes"), sum(df$internet == "no"))
)
binary_long$Variable <- factor(binary_long$Variable,
                               levels = c("Paid Extra\nClasses", "Higher Education\nAspiration", "Internet\nAccess"))
binary_long$Response <- factor(binary_long$Response, levels = c("Yes", "No"))

ggplot(binary_long, aes(x = Variable, y = Count, fill = Response)) +
  geom_bar(stat = "identity", position = "dodge", width = 0.7) +
  geom_text(aes(label = Count), position = position_dodge(width = 0.7), vjust = -0.5, size = 3) +
  scale_fill_manual(values = c("Yes" = "#66c2a5", "No" = "#fc8d62")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Binary Variables Distribution", x = "", y = "Count") +
  theme_minimal() +
  theme(legend.position = "bottom",
        legend.title = element_blank(),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9),
        axis.text.x = element_text(size = 8))
```

**Interpretation:** Less than half (45.8%) take paid extra Math classes. A striking 94.9% aspire to higher education. Internet access is available to 83.3% of students.
 
# Ordinal Variables (Raju): Mother's Education (Medu) and Family Relationship (Famrel)
 
**Mother's Education categories:** 0 = none, 1 = primary (4th grade), 2 = 5th-9th grade, 3 = secondary, 4 = higher education.
 
**Family Relationship categories:** 1 = very bad, 2 = bad, 3 = neutral, 4 = good, 5 = excellent.
 
## Visualization
 
```{r raju-ordinal-plots, fig.width=7, fig.height=2.5, fig.pos='H', fig.cap="Distribution of Ordinal Variables - Mother's Education (left) and Family Relationship (right)"}
p1 <- ggplot(df, aes(x = factor(Medu), fill = factor(Medu))) +
  geom_bar() + geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Blues") +
  scale_x_discrete(labels = c("0", "1", "2", "3", "4")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Mother's Education", x = "Level (0=none to 4=higher)", y = "Count") +
  theme_minimal() +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))
 
p2 <- ggplot(df, aes(x = factor(famrel), fill = factor(famrel))) +
  geom_bar() + geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Greens") +
  scale_x_discrete(labels = c("1", "2", "3", "4", "5")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Family Relationship", x = "Quality (1=bad to 5=excellent)", y = "Count") +
  theme_minimal() +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))
 
grid.arrange(p1, p2, ncol = 2)
```
 
**Interpretation:** Mother's education is skewed toward higher levels with mode=4 (higher education, n=131) and median=3 (secondary education). Only 3 mothers have no formal education. Family relationship quality is predominantly positive with mode=4 (good, n=195) and median=4 (good). Over 71% report good to excellent relationships, suggesting supportive home environments.
 
# Numeric Variable (Raju): Age
 
## Descriptive Statistics
 
```{r raju-age-stats, results='asis'}
cat("N =", length(df$age), "$\\mid$",
    "Mean =", round(mean(df$age), 2), "$\\mid$",
    "Median =", median(df$age), "$\\mid$",
    "Mode =", names(which.max(table(df$age))), "$\\mid$",
    "SD =", round(sd(df$age), 2), "$\\mid$",
    "Range =", paste(min(df$age), "-", max(df$age)), "$\\mid$",
    "IQR =", IQR(df$age), "  \n")
```
 
## Visualization
 
```{r raju-age-plots, fig.width=7, fig.height=2, fig.pos='H', fig.cap="Age Distribution - Histogram with mean line (left) and Boxplot (right)"}
age_mean <- mean(df$age)
 
p1 <- ggplot(df, aes(x = age)) +
  geom_histogram(binwidth = 1, fill = "steelblue", color = "white", alpha = 0.7) +
  geom_vline(aes(xintercept = age_mean), color = "red", linetype = "dashed", size = 1) +
  labs(title = "Age Distribution",
       subtitle = paste("Red = Mean (", round(age_mean, 2), ")", sep = ""),
       x = "Age", y = "Count") +
  scale_x_continuous(breaks = 15:22) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
 
p2 <- ggplot(df, aes(x = "", y = age)) +
  geom_boxplot(fill = "steelblue", alpha = 0.7, outlier.color = "red", outlier.size = 2) +
  labs(title = "Age Boxplot", x = "", y = "Age") +
  theme_minimal() +
  theme(axis.text.x = element_blank(), axis.ticks.x = element_blank(),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))
 
grid.arrange(p1, p2, ncol = 2, widths = c(2, 1))
```
 
**Interpretation:** Ages range from 15-22 years with mean=16.70, median=17, mode=16, and SD=1.28. The distribution is slightly right-skewed with most students in the typical 15-18 age range. Older students (19-22) may have repeated grades. The IQR of 2 years confirms low variability, with potential outliers at the upper end.
 
# Bivariate Analysis (Raju): Mother's Education vs Final Grade (G3)

## Descriptive Statistics & Visualization

```{r raju-bivariate-combined, fig.width=9, fig.height=2.5, fig.pos='H', fig.cap="Final Grade by Mother's Education - Summary Table (left) and Boxplot (right)"}
bivariate_stats <- df %>% group_by(Medu) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), SD = round(sd(G3), 2), .groups = "drop")

spearman_cor <- cor(df$Medu, df$G3, method = "spearman")

# Create table grob
table_grob <- tableGrob(bivariate_stats, rows = NULL,
                        cols = c("Medu", "n", "Mean G3", "SD"),
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7))
                        ))

# Create boxplot
plot_grob <- ggplotGrob(
  ggplot(df, aes(x = factor(Medu), y = G3, fill = factor(Medu))) +
    geom_boxplot() +
    scale_fill_brewer(palette = "Blues") +
    scale_x_discrete(labels = c("0:None", "1:Primary", "2:5th-9th", "3:Secondary", "4:Higher")) +
    labs(title = "Final Grade by Mother's Education",
         subtitle = paste("Spearman r =", round(spearman_cor, 3)),
         x = "Mother's Education", y = "Final Grade (G3)") +
    theme_minimal() +
    theme(legend.position = "none",
          axis.text.x = element_text(angle = 30, hjust = 1, size = 8),
          plot.title = element_text(size = 10),
          plot.subtitle = element_text(size = 8),
          axis.title = element_text(size = 9))
)

grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```

**Interpretation:** Spearman correlation r=0.225 indicates a weak positive relationship between mother's education and final grades. The high mean for Medu=0 (13.0) is a small sample artifact (n=3). Excluding this group, grades increase consistently from 8.68 (primary) to 11.76 (higher education), suggesting mother's education is a meaningful predictor of student performance.
 
# Bivariate Analysis (Hrusheekesh): Study Time vs G3

```{r hrush-studytime-setup, include=FALSE}
df$studytime_ordered <- factor(df$studytime,
                       levels = c(1, 2, 3, 4),
                       labels = c("<2 hours", "2-5 hours", "5-10 hours", ">10 hours"))

studytime_grade_stats <- df %>% group_by(studytime_ordered) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), Median_G3 = median(G3), SD = round(sd(G3), 2), .groups = "drop")
studytime_mean_5_10 <- round(studytime_grade_stats$Mean_G3[studytime_grade_stats$studytime_ordered == "5-10 hours"], 2)
studytime_mean_lt2 <- round(studytime_grade_stats$Mean_G3[studytime_grade_stats$studytime_ordered == "<2 hours"], 2)
studytime_n_2_5 <- studytime_grade_stats$n[studytime_grade_stats$studytime_ordered == "2-5 hours"]
```

```{r hrush-studytime-combined, fig.width=9, fig.height=3.5, fig.pos='H', fig.cap="Study Time vs G3: Statistics (left) and distribution (right)"}
p_table <- tableGrob(studytime_grade_stats, rows = NULL, 
                     cols = c("Study Time", "n", "Mean", "Median", "SD"),
                     theme = ttheme_default(
                       core = list(fg_params = list(cex = 0.65)),
                       colhead = list(fg_params = list(cex = 0.7))
                       ))

p_plot <- ggplot(df, aes(x = studytime_ordered, y = G3, fill = studytime_ordered)) +
  geom_boxplot(varwidth = TRUE, outlier.colour = "red", alpha = 0.7) +
  geom_jitter(color = "black", size = 0.25, alpha = 0.15, width = 0.1) +
  labs(title = "Final Grade by Study Time",
       x = "Weekly Study Time", y = "Final Grade (G3)") +
  theme_minimal() +
  scale_fill_brewer(palette = "Pastel1") +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 30, hjust = 1, size = 8),
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))

grid.arrange(p_table, p_plot, ncol = 2, widths = c(0.35, 0.65))
```

**Interpretation:** Students studying 5-10 hours achieve highest mean (`r studytime_mean_5_10`), while <2 hours group has lowest (`r studytime_mean_lt2`). Most students (n=`r studytime_n_2_5`) study 2-5 hours weekly.  Study time is a meaningful predictor, though extreme hours may reflect diminishing returns.
 
# Bivariate Analysis (Hrusheekesh): Failures vs Absences

```{r hrush-failures-setup, include=FALSE}
df$failures_factor <- as.factor(df$failures)

failures_absence_stats <- df %>% group_by(failures) %>%
  summarise(n = n(), Mean_Abs = round(mean(absences), 2), Median_Abs = median(absences), SD = round(sd(absences), 2), .groups = "drop")
failures_mean_0 <- round(failures_absence_stats$Mean_Abs[failures_absence_stats$failures == 0], 2)
failures_mean_3 <- round(failures_absence_stats$Mean_Abs[failures_absence_stats$failures == 3], 2)
```

```{r hrush-failures-combined, fig.width=9, fig.height=3, fig.pos='H', fig.cap="Failures vs Absences: Statistics (left) and distribution (right)"}
p_table <- tableGrob(failures_absence_stats, rows = NULL,
                     cols = c("Failures", "n", "Mean", "Median", "SD"),
                     theme = ttheme_default(
                       core = list(fg_params = list(cex = 0.65)),
                       colhead = list(fg_params = list(cex = 0.7))
                       ))

p_plot <- ggplot(df, aes(x = failures_factor, y = absences, fill = failures_factor)) +
  geom_boxplot(outlier.colour = "red", alpha = 0.6) +
  geom_jitter(width = 0.2, alpha = 0.2, size = 0.3) +
  geom_hline(yintercept = median(df$absences), linetype = "dashed", color = "blue", size = 0.7) +
  labs(title = "Absences vs. Past Failures",
       x = "Past Failures", y = "Absences") +
  theme_minimal() +
  scale_fill_brewer(palette = "YlOrRd") +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9),
        axis.text = element_text(size = 8))

grid.arrange(p_table, p_plot, ncol = 2, widths = c(0.35, 0.65))
```

**Interpretation:** Students with no failures average `r failures_mean_0` absences, while those with 3 failures average `r failures_mean_3`. High variability and outliers suggest the relationship is not deterministic. Most failure groups cluster near typical absence levels, indicating factors beyond attendance contribute to academic failure.
 
# Bivariate Analysis (Hrusheekesh): Paid Classes vs G3

```{r hrush-paid-setup, include=FALSE}
df$paid_labeled <- factor(df$paid, levels = c("no", "yes"), labels = c("No", "Yes"))
paid_grade_stats <- df %>% group_by(paid_labeled) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), Median_G3 = median(G3), SD = round(sd(G3), 2), .groups = "drop")
mean_by_paid <- aggregate(G3 ~ paid_labeled, df, mean)
paid_mean_no <- round(paid_grade_stats$Mean_G3[paid_grade_stats$paid_labeled == "No"], 2)
paid_mean_yes <- round(paid_grade_stats$Mean_G3[paid_grade_stats$paid_labeled == "Yes"], 2)
paid_diff <- round(paid_mean_no - paid_mean_yes, 2)
```

```{r hrush-paid-combined, fig.width=9, fig.height=3, fig.pos='H', fig.cap="Paid Classes vs G3: Statistics (left) and density distribution (right)"}
p_table <- tableGrob(paid_grade_stats, rows = NULL,
                     cols = c("Paid", "n", "Mean", "Median", "SD"),
                     theme = ttheme_default(
                       core = list(fg_params = list(cex = 0.65)),
                       colhead = list(fg_params = list(cex = 0.7))
                       ))

p_plot <- ggplot(df, aes(x = G3, fill = paid_labeled)) +
  geom_density(alpha = 0.5) +
  geom_vline(data = mean_by_paid, aes(xintercept = G3, color = paid_labeled),
             linetype = "dashed", size = 0.8) +
  labs(title = "Impact of Paid Classes on Final Grade",
       x = "Final Grade (G3)", y = "Density",
       fill = "Paid", color = "Mean") +
  theme_minimal() +
  scale_fill_manual(values = c("No" = "#E41A1C", "Yes" = "#377EB8")) +
  scale_color_manual(values = c("No" = "#E41A1C", "Yes" = "#377EB8")) +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8), 
        axis.title = element_text(size = 9),
        legend.title = element_text(size = 9),
        legend.text = element_text(size = 8),
        legend.position = "bottom")

grid.arrange(p_table, p_plot, ncol = 2, widths = c(0.35, 0.65))
```

**Interpretation:** Students without paid classes have higher mean grade (`r paid_mean_no`) vs. those with paid classes (`r paid_mean_yes`), difference of `r paid_diff` points. The visualizations suggest marginally significant difference. Counterintuitive finding likely reflects selection bias: struggling students more likely enroll for remedial support. Substantial distribution overlap indicates paid classes do not universally improve performance.
 
# Bivariate Analysis (Melisa): G3 vs Internet Access
 
```{r melisa-internet-combined, fig.width=9, fig.height=3, fig.pos='H', fig.cap="Internet Access vs G3: Statistics (left) and Boxplot (right)"}
# 1. Prepare Data and Stats
df$internet_labeled <- factor(df$internet, levels = c("no", "yes"), labels = c("No", "Yes"))

internet_stats <- df %>% 
  group_by(internet_labeled) %>% 
  summarise(
    n = n(),
    Mean_G3 = round(mean(G3), 2),
    Median_G3 = median(G3),
    SD = round(sd(G3), 2),
    .groups = "drop"
  )

# 2. Create Table Grob
table_grob <- tableGrob(internet_stats, rows = NULL, 
                        cols = c("Internet", "n", "Mean", "Median", "SD"),
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7))
                        ))

# 3. Create Plot Grob (Boxplot with Mean Diamond)
plot_grob <- ggplot(df, aes(x = internet_labeled, y = G3, fill = internet_labeled)) +
  geom_boxplot(alpha = 0.7, outlier.colour = "red", outlier.shape = 1) +
  stat_summary(fun = mean, geom = "point", shape = 23, size = 3, fill = "white") +
  labs(title = "Internet Access vs. Final Grades",
       subtitle = "White diamond indicates Mean",
       x = "Internet Access",
       y = "Final Grade (G3)") +
  theme_minimal() +
  scale_fill_manual(values = c("#E69F00", "#56B4E9")) +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9),
        axis.text = element_text(size = 8))

# 4. Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))

 
```
 
**Interpretation:** Students with internet access at home have a higher mean grade (10.62) compared to those without (9.41), a difference of roughly 1.2 points. The boxplot visually confirms this shift, with the "Yes" group showing a higher median and mean (white diamond). This suggests that access to digital resources may positively influence academic performance, potentially by facilitating research and study materials.
 
# Bivariate Analysis (Melisa): G3 vs Wish For Higher Education
 
```{r melisa-higher-combined, fig.width=9, fig.height=3, fig.pos='H', fig.cap="Higher Education Goal vs G3: Statistics (left) and Boxplot (right)"}
# 1. Prepare Data and Stats
df$higher_labeled <- factor(df$higher, levels = c("no", "yes"), labels = c("No", "Yes"))

higher_stats <- df %>% 
  group_by(higher_labeled) %>% 
  summarise(
    n = n(),
    Mean_G3 = round(mean(G3), 2),
    Median_G3 = median(G3),
    SD = round(sd(G3), 2),
    .groups = "drop"
  )

# 2. Create Table Grob (Small text size)
table_grob <- tableGrob(higher_stats, rows = NULL, 
                        cols = c("Higher Education?", "n", "Mean", "Median", "SD"),
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7))
                        ))

# 3. Create Plot Grob
plot_grob <- ggplot(df, aes(x = higher_labeled, y = G3, fill = higher_labeled)) +
  geom_boxplot(alpha = 0.7, outlier.colour = "red") +
  labs(title = "Final Grade by Higher Education Goal",
       x = "Wants Higher Education?", 
       y = "Final Grade (G3)") +
  theme_minimal() +
  scale_fill_brewer(palette = "Set2") +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9),
        axis.text = element_text(size = 8))

# 4. Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```

**Interpretation:** The analysis of the descriptive statistics and the boxplot reveals a clear distinction between the two groups. Students who intend to pursue higher education (`higher = yes`) demonstrate a noticeably higher level of academic performance compared to those who do not (`higher = no`).
 
Observing the descriptive table, the mean and median grades for the "Yes" group are elevated, suggesting that motivation for future studies is a strong factor in current performance. The boxplot further confirms this trend:
 
* **Median Differences:** The median line for the "Yes" group is positioned higher on the G3 scale than that of the "No" group.
* **Distribution Shift:** The entire interquartile range (the box) for students aiming for higher education is shifted upwards, indicating that the bulk of these students perform better than the majority of the "No" group.
* **Variability:** While both groups show some spread, the lower quartile for the "Yes" group is often higher than the median of the "No" group, highlighting a significant gap in achievement.
 
Overall, the desire to attend higher education appears to be positively associated with higher final grades.
 
# Bivariate Analysis (Melisa): Family Relationship vs Age

```{r melisa-rebellion-combined, fig.width=9, fig.height=5.5, fig.pos='H', fig.cap="Family Relationship vs Age: Statistics (left) and Heatmap (right)"}
# 1. Prepare Stats
age_famrel_stats <- df %>% 
  group_by(age) %>% 
  summarise(
    n = n(),
    Mean = round(mean(famrel), 2),
    Median = median(famrel),
    SD = round(sd(famrel), 2),
    .groups = "drop"
  )

# 2. Create Table Grob (Small text size)
table_grob <- tableGrob(age_famrel_stats, rows = NULL, 
                        cols = c("Age", "n", "Mean", "Median", "SD"),
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7))
                        ))

# 3. Create Plot Grob (Heatmap)
rebellion_counts <- df %>% count(age, famrel)

plot_grob <- ggplot(rebellion_counts, aes(x = factor(age), y = factor(famrel), fill = n)) +
  geom_tile(color = "white", lwd = 0.5) +
  geom_text(aes(label = n), color = "black", size = 2.5) +
  scale_fill_gradient(low = "#FFF5F0", high = "#CB181D") +
  labs(title = "Rebellion Hypothesis Heatmap",
       x = "Student Age",
       y = "FamRel (1=Bad, 5=Excel)",
       fill = "Count") +
  theme_minimal() +
  coord_fixed(ratio = 1) + 
  theme(legend.position = "right",
        legend.title = element_text(size = 8),
        legend.text = element_text(size = 7),
        legend.key.width = unit(0.3, "cm"),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9),
        axis.text = element_text(size = 8))

# 4. Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.4, 0.6))
```
 
**Interpretation**
The heatmap suggests that family relationships do not significantly deteriorate with age, contradicting the "Rebellion Hypothesis." The highest concentration of students consistently reports good to excellent relationships (levels 4 and 5) across all age groups, with no clear downward trend in relationship quality as students get older.
 
# Bivariate Analysis (Melisa): Simple Linear Regression G3~Absences

```{r melisa-regression-combined, fig.width=9, fig.height=3.5, dev='pdf', fig.pos='H', fig.cap="Prerequisite Linearity Check (left) and Regression Coefficients (right)"}
library(grid)
library(gridExtra)
library(broom)

# 1. Run Model
lm_absences <- lm(G3 ~ absences, data = df)

# 2. Create Plot Grob (Left Side: Linearity Check)
plot_grob <- ggplot(df, aes(x = absences, y = G3)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", color = "red", se = FALSE) +
  labs(title = "Prerequisite: Linearity Check",
       x = "Absences", 
       y = "Final Grade (G3)") +
  theme_minimal() +
  theme(plot.title = element_text(size = 11),
        axis.title = element_text(size = 10),
        axis.text = element_text(size = 9))

# 3. Create Table Grob (Right Side: Clean Coefficients Table)
# We use broom::tidy to get the data instead of raw text, avoiding clipping issues.
tidy_stats <- tidy(lm_absences)
tidy_stats$term[tidy_stats$term == "(Intercept)"] <- "(Intercept)"

# Round values for cleaner display
tidy_stats$estimate <- round(tidy_stats$estimate, 3)
tidy_stats$std.error <- round(tidy_stats$std.error, 3)
tidy_stats$statistic <- round(tidy_stats$statistic, 3)
tidy_stats$p.value <- round(tidy_stats$p.value, 3)

# Create the table object
# We add a title row manually to the top of the table
table_grob <- tableGrob(tidy_stats, rows = NULL, 
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.8)),
                          colhead = list(fg_params = list(cex = 0.9, fontface = "bold"))
                        ))

# Add a header title above the table using textGrob
header_text <- textGrob("Regression Coefficients: Impact of Absences on Final Grade", 
                        gp = gpar(fontsize = 10, fontface = "bold"))

# Combine header and table vertically
right_side <- arrangeGrob(header_text, table_grob, heights = c(0.1, 0.9))

# 4. Arrange Plot (Left) and Table (Right)
grid.arrange(plot_grob, right_side, ncol = 2, widths = c(0.5, 0.5))
```
 
**Interpretation:**
The simple linear regression analysis was conducted to assess the effect of student absences on final mathematics grades (G3).

* **Significance:** The p-value for the absences coefficient is **0.497**. Since this value is significantly higher than the standard alpha level of 0.05, the relationship is **not statistically significant**.

* **Coefficient (Slope):** The estimated coefficient for absences is **0.020**. While this technically suggests a negligible positive increase in grades per absence, the lack of statistical significance indicates that this result is likely due to chance or random variation rather than a meaningful effect.

* **Conclusion:** Based on this model, we cannot conclude that the number of absences is a reliable predictor of the final mathematics grade. The data suggests that absences alone do not have a significant linear impact on academic performance in this context.

```{r melisa-diagnostics, fig.width=8, fig.height=2.5, dev='pdf', fig.pos='H', fig.cap="Model Diagnostics: Residuals vs Fitted Values"}
# 1. Get data for the plot
diag_data <- data.frame(
  Fitted = fitted(lm_absences),
  Residuals = resid(lm_absences)
)

# 2. Create the plot (Height reduced to 2.5 to fit on page 10)
ggplot(diag_data, aes(x = Fitted, y = Residuals)) +
  geom_point(alpha = 0.6, color = "steelblue") +
  geom_hline(yintercept = 0, color = "red", linetype = "dashed", size = 1) +
  labs(title = "Residuals vs. Fitted Values",
       subtitle = "Check for random distribution around zero (Homoscedasticity)",
       x = "Fitted Values (Predicted G3)",
       y = "Residuals") +
  theme_minimal() +
  theme(plot.title = element_text(size = 9, face = "bold"),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 8),
        axis.text = element_text(size = 7))
```

# Literature

<div id="refs"></div>
