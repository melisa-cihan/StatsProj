---
title: "Univariate Analysis - Student Performance Dataset"
author: "Kezia Fernandes, Raju Ahmed, Melisa Cihan, Hrusheekesh Sawarkar"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
    toc_depth: 1
    number_sections: true
geometry: margin=0.6in
bibliography: references.bib
header-includes:
  - \usepackage{float}
  - \floatplacement{figure}{H}
  - \usepackage{titlesec}
  - \titlespacing{\section}{0pt}{18pt plus 2pt minus 2pt}{8pt plus 2pt minus 2pt}
  - \titlespacing{\subsection}{0pt}{12pt plus 2pt minus 2pt}{6pt plus 2pt minus 2pt}
  - \usepackage{parskip}
  - \setlength{\parskip}{8pt}
  - \usepackage{tocloft}
  - \renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
  - \setlength{\cftbeforesecskip}{4pt}
  - \usepackage{caption}
  - \captionsetup[figure]{skip=8pt}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, 
                      fig.width = 5, fig.height = 2.5, fig.pos = 'H')
options(knitr.kable.NA = '-')
```

```{r load-data, include=FALSE}
# Load required libraries
library(dplyr)
library(ggplot2)
library(moments)
library(knitr)
library(gridExtra)
library(grid)

# Load dataset
df <- read.csv("student-mat-selected.csv", stringsAsFactors = FALSE)
```

# Introduction

This dataset originates from the secondary education domain and focuses on analyzing factors associated with student academic performance in Mathematics at two Portuguese secondary schools [@cortez2008student; @cortez2008using]. The data capture multiple dimensions of a student’s profile, combining academic outcomes, demographic characteristics, and socio-educational factors. Information was collected through a combination of school records (such as grades and absences) and student questionnaires, providing both objective and self-reported measures relevant to educational performance.

For this analysis, a subset of 13 variables was selected to reflect key aspects influencing student achievement while maintaining analytical clarity. These variables include demographic attributes (sex, age), family and background indicators (mother’s education level, quality of family relationships), school-related factors (study time, travel time, past failures, absences), support and engagement variables (paid classes, extracurricular activities, internet access), educational aspirations (desire for higher education), and the final Mathematics grade (G3) as the outcome variable.

The dataset contains a mix of binary nominal variables (e.g., sex, internet access), ordinal categorical variables (e.g., study time, travel time, family relationship quality), and numeric discrete variables (e.g., age, failures, absences). The final grade (G3), measured on a scale from 0 to 20, is treated as a continuous numeric variable. This structure makes the dataset well suited for univariate statistical analysis, allowing for an initial exploration of distributions, central tendencies, and variability across different types of educational and socio-demographic factors.

# Continuous Variable: G3 (Final Grade)

## Descriptive Statistics

```{r g3-stats, results='asis'}
cat("Total =", length(df$G3), "$\\mid$",
    "Mean =", round(mean(df$G3), 2), "$\\mid$",
    "Median =", median(df$G3), "$\\mid$",
    "Mode =", names(which.max(table(df$G3))), "$\\mid$",
    "SD =", round(sd(df$G3), 2), "$\\mid$",
    "Variance =", round(var(df$G3), 2), "$\\mid$",
    "CV =", round(sd(df$G3)/mean(df$G3), 3), "  \n\n")

cat("Five-Number Summary:  \n")
cat("Min =", min(df$G3), "$\\mid$",
    "Q1 =", quantile(df$G3, 0.25), "$\\mid$",
    "Median =", median(df$G3), "$\\mid$",
    "Q3 =", quantile(df$G3, 0.75), "$\\mid$",
    "Max =", max(df$G3), "$\\mid$",
    "IQR =", IQR(df$G3), "  \n\n")

cat("Shape:  \n")
cat("Skewness =", round(skewness(df$G3), 3), "  \n")
```

## Visualization

```{r g3-histogram, fig.cap="Distribution of Final Grades showing left skewness", fig.height=2.5}
g3_mean <- mean(df$G3)
g3_median <- median(df$G3)

ggplot(df, aes(x = G3)) +
  geom_histogram(aes(y = ..density..), binwidth = 1, fill = "steelblue", 
                 color = "white", alpha = 0.7) +
  geom_density(color = "darkblue", size = 1) +
  geom_vline(aes(xintercept = g3_mean), color = "red", linetype = "dashed", size = 1) +
  geom_vline(aes(xintercept = g3_median), color = "green", linetype = "dashed", size = 1) +
  labs(title = "Distribution of Final Grades (G3)",
       subtitle = "Red = Mean (10.42) | Green = Median (11)",
       x = "Final Grade (0-20)", y = "Density") +
  scale_x_continuous(breaks = seq(0, 20, 2)) +
  theme_minimal() +
  theme(plot.title = element_text(size = 10), 
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
```

## Interpretation

The mean final grade is 10.42 with median of 11. The SD of 4.58 shows considerable variability (CV = 0.44). The skewness of -0.73 indicates a left-skewed distribution with more high-performing students. Grades span 0 to 20, with 50% scoring between 8 and 14 (IQR = 6).

# Numeric Discrete Variable: Absences

## Descriptive Statistics

```{r absences-stats, results='asis'}
cat("N =", length(df$absences), "$\\mid$",
    "Mean =", round(mean(df$absences), 2), "$\\mid$",
    "Median =", median(df$absences), "$\\mid$",
    "Mode =", names(which.max(table(df$absences))), "$\\mid$",
    "SD =", round(sd(df$absences), 2), "$\\mid$",
    "Variance =", round(var(df$absences), 2), "$\\mid$",
    "CV =", round(sd(df$absences)/mean(df$absences), 3), "  \n\n")

cat("Five-Number Summary:  \n")
cat("Min =", min(df$absences), "$\\mid$",
    "Q1 =", quantile(df$absences, 0.25), "$\\mid$",
    "Median =", median(df$absences), "$\\mid$",
    "Q3 =", quantile(df$absences, 0.75), "$\\mid$",
    "Max =", max(df$absences), "$\\mid$",
    "IQR =", IQR(df$absences), "  \n\n")

cat("Shape:  \n")
cat("Skewness =", round(skewness(df$absences), 3), "$\\mid$",
    "Zero absences:", round((sum(df$absences == 0)/length(df$absences))*100, 1), "\\%  \n")
```

## Visualization

```{r absences-plots, fig.cap="Distribution and outliers in student absences", fig.height=2.5, fig.width=7}
abs_mean <- mean(df$absences)
abs_median <- median(df$absences)

p1 <- ggplot(df, aes(x = absences)) +
  geom_histogram(binwidth = 2, fill = "salmon", color = "white", alpha = 0.7) +
  geom_vline(aes(xintercept = abs_mean), color = "red", linetype = "dashed", size = 1) +
  geom_vline(aes(xintercept = abs_median), color = "green", linetype = "dashed", size = 1) +
  labs(title = "Distribution of Student Absences",
       subtitle = "Red = Mean (5.71) | Green = Median (4)",
       x = "Number of Absences", y = "Frequency") +
  theme_minimal() +
  theme(plot.title = element_text(size = 10), 
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))

p2 <- ggplot(df, aes(x = "", y = absences)) +
  geom_boxplot(fill = "salmon", alpha = 0.7, outlier.color = "red", outlier.size = 2) +
  labs(title = "Boxplot of Absences", y = "Number of Absences", x = "") +
  theme_minimal() +
  theme(axis.text.x = element_blank(), axis.ticks.x = element_blank(),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))

grid.arrange(p1, p2, ncol = 2, widths = c(2, 1))
```

## Interpretation

Students average 5.71 absences with median of 4, but mode is 0 (29.1% had perfect attendance). The SD of 8.0 is notably large with CV = 1.402, indicating extremely high variability. The skewness of 3.658 shows an extremely right-skewed distribution. Absences range from 0 to 75, with 50% having 0-8 absences (IQR = 8).

# Numeric Discrete Variable: Failures

## Descriptive Statistics

```{r failures-stats, results='asis'}
cat("N =", length(df$failures), "$\\mid$",
    "Mean =", round(mean(df$failures), 2), "$\\mid$",
    "Median =", median(df$failures), "$\\mid$",
    "Mode =", names(which.max(table(df$failures))), "$\\mid$",
    "SD =", round(sd(df$failures), 2), "$\\mid$",
    "Variance =", round(var(df$failures), 2), "$\\mid$",
    "Range =", paste(min(df$failures), "-", max(df$failures)), "  \n")
```

## Frequency Distribution & Visualization

```{r failures-combined, fig.height=3, fig.width=9}

failures_freq <- data.frame(
  Failures = names(table(df$failures)),
  Count = as.vector(table(df$failures)),
  Percentage = round(as.vector(prop.table(table(df$failures))) * 100, 2),
  Cumulative = round(cumsum(as.vector(prop.table(table(df$failures)))) * 100, 2)
)

# Create table grob with smaller font
table_grob <- tableGrob(failures_freq, rows = NULL, 
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7)),
                          rowhead = list(fg_params = list(cex = 0.65))
                        ))

# Create plot
plot_grob <- ggplotGrob(
  ggplot(df, aes(x = factor(failures))) +
    geom_bar(fill = "darkred", color = "white", alpha = 0.7) +
    geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3.5) +
    labs(title = "Distribution of Past Class Failures",
         x = "Number of Past Failures", y = "Frequency") +
    scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
    theme_minimal() +
    theme(plot.title = element_text(size = 10),
          axis.title = element_text(size = 9))
)

# Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```


## Interpretation

Mean is 0.33 failures with median and mode of 0. An impressive 78.99% have never failed a class. Only 8.35% have failed 2+ classes, representing a small at-risk group. The SD of 0.74 indicates limited variability.

# Ordinal Variable: Study Time

**Study time categories:** 1 = <2 hours/week, 2 = 2-5 hours, 3 = 5-10 hours, 4 = >10 hours.

## Frequency Distribution & Visualization
```{r studytime-combined, fig.height=3, fig.width=9}
studytime_freq <- data.frame(
  Category = names(table(df$studytime)),
  Count = as.vector(table(df$studytime)),
  Percentage = round(as.vector(prop.table(table(df$studytime))) * 100, 2),
  Cumulative = round(cumsum(as.vector(prop.table(table(df$studytime)))) * 100, 2)
)

studytime_labels <- c("1: <2 hrs", "2: 2-5 hrs", "3: 5-10 hrs", "4: >10 hrs")

# Create table grob with smaller font
table_grob <- tableGrob(studytime_freq, rows = NULL, 
                        theme = ttheme_default(
                          core = list(fg_params = list(cex = 0.65)),
                          colhead = list(fg_params = list(cex = 0.7)),
                          rowhead = list(fg_params = list(cex = 0.65))
                        ))

# Create plot
plot_grob <- ggplotGrob(
  ggplot(df, aes(x = factor(studytime))) +
    geom_bar(fill = "mediumpurple", color = "white", alpha = 0.7) +
    geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3.5) +
    scale_x_discrete(labels = studytime_labels) +
    labs(title = "Distribution of Weekly Study Time", x = "Study Time Category", y = "Frequency") +
    scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
    theme_minimal() +
    theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 8),
          plot.title = element_text(size = 10),
          axis.title = element_text(size = 9))
)

# Arrange side by side
grid.arrange(table_grob, plot_grob, ncol = 2, widths = c(0.35, 0.65))
```

**Study Time - Central Tendency:**  
Mode = `r names(which.max(table(df$studytime)))` | Median = `r median(df$studytime)`

## Interpretation

Most common is category 2 (2-5 hours/week) with 50.13% of students. Over 26% study <2 hours weekly (potentially insufficient). Only 6.84% study >10 hours. Median of 2 confirms typical student studies 2-5 hours weekly.

# Binary Variables (Raju): Paid Extra Classes, Higher Education Aspiration, Internet Access

## Frequency Distribution

```{r raju-binary-summary-table}
binary_summary <- data.frame(
  Variable = c("Paid Extra Classes", "Higher Education Aspiration", "Internet Access"),
  Yes_n = c(sum(df$paid == "yes"), sum(df$higher == "yes"), sum(df$internet == "yes")),
  Yes_pct = c(round(mean(df$paid == "yes")*100,1), round(mean(df$higher == "yes")*100,1),
              round(mean(df$internet == "yes")*100,1)),
  No_n = c(sum(df$paid == "no"), sum(df$higher == "no"), sum(df$internet == "no")),
  Mode = c("no", "yes", "yes")
)
kable(binary_summary, caption = "Binary Variables Summary", col.names = c("Variable", "Yes (n)", "Yes (%)", "No (n)", "Mode"))
```

## Visualization

```{r raju-binary-plot, fig.width=5, fig.height=2, fig.pos='H', fig.cap="Distribution of Binary Variables - Percentage of Yes responses"}
binary_data <- data.frame(
  Variable = factor(c("Paid Extra Classes", "Higher Education\nAspiration", "Internet Access"),
                    levels = c("Paid Extra Classes", "Higher Education\nAspiration", "Internet Access")),
  Percentage = c(mean(df$paid == "yes")*100, mean(df$higher == "yes")*100,
                 mean(df$internet == "yes")*100)
)
ggplot(binary_data, aes(x = Variable, y = Percentage, fill = Variable)) +
  geom_bar(stat = "identity", width = 0.7) +
  geom_text(aes(label = paste0(round(Percentage, 1), "%")), vjust = -0.5, size = 3.5) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15)), limits = c(0, 100)) +
  scale_fill_brewer(palette = "Set2") +
  labs(title = "Binary Variables Distribution", x = "", y = "Percentage (%)") +
  theme_minimal() +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))
```

**Interpretation:** Less than half (45.8%) take paid extra Math classes. A striking 94.9% aspire to higher education. Internet access is available to 83.3% of students.

# Ordinal Variables (Raju): Mother's Education (Medu) and Family Relationship (Famrel)

**Mother's Education categories:** 0 = none, 1 = primary (4th grade), 2 = 5th-9th grade, 3 = secondary, 4 = higher education.

**Family Relationship categories:** 1 = very bad, 2 = bad, 3 = neutral, 4 = good, 5 = excellent.

## Visualization

```{r raju-ordinal-plots, fig.width=7, fig.height=2.5, fig.pos='H', fig.cap="Distribution of Ordinal Variables - Mother's Education (left) and Family Relationship (right)"}
p1 <- ggplot(df, aes(x = factor(Medu), fill = factor(Medu))) +
  geom_bar() + geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Blues") +
  scale_x_discrete(labels = c("0", "1", "2", "3", "4")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Mother's Education", x = "Level (0=none to 4=higher)", y = "Count") +
  theme_minimal() +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))

p2 <- ggplot(df, aes(x = factor(famrel), fill = factor(famrel))) +
  geom_bar() + geom_text(stat = "count", aes(label = after_stat(count)), vjust = -0.5, size = 3) +
  scale_fill_brewer(palette = "Greens") +
  scale_x_discrete(labels = c("1", "2", "3", "4", "5")) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(title = "Family Relationship", x = "Quality (1=bad to 5=excellent)", y = "Count") +
  theme_minimal() +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))

grid.arrange(p1, p2, ncol = 2)
```

**Interpretation:** Mother's education is skewed toward higher levels with mode=4 (higher education, n=131) and median=3 (secondary education). Only 3 mothers have no formal education. Family relationship quality is predominantly positive with mode=4 (good, n=195) and median=4 (good). Over 71% report good to excellent relationships, suggesting supportive home environments.

# Numeric Variable (Raju): Age

## Descriptive Statistics

```{r raju-age-stats, results='asis'}
cat("N =", length(df$age), "$\\mid$",
    "Mean =", round(mean(df$age), 2), "$\\mid$",
    "Median =", median(df$age), "$\\mid$",
    "Mode =", names(which.max(table(df$age))), "$\\mid$",
    "SD =", round(sd(df$age), 2), "$\\mid$",
    "Range =", paste(min(df$age), "-", max(df$age)), "$\\mid$",
    "IQR =", IQR(df$age), "  \n")
```

## Visualization

```{r raju-age-plots, fig.width=7, fig.height=2, fig.pos='H', fig.cap="Age Distribution - Histogram with mean line (left) and Boxplot (right)"}
age_mean <- mean(df$age)

p1 <- ggplot(df, aes(x = age)) +
  geom_histogram(binwidth = 1, fill = "steelblue", color = "white", alpha = 0.7) +
  geom_vline(aes(xintercept = age_mean), color = "red", linetype = "dashed", size = 1) +
  labs(title = "Age Distribution",
       subtitle = paste("Red = Mean (", round(age_mean, 2), ")", sep = ""),
       x = "Age", y = "Count") +
  scale_x_continuous(breaks = 15:22) +
  scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))

p2 <- ggplot(df, aes(x = "", y = age)) +
  geom_boxplot(fill = "steelblue", alpha = 0.7, outlier.color = "red", outlier.size = 2) +
  labs(title = "Age Boxplot", x = "", y = "Age") +
  theme_minimal() +
  theme(axis.text.x = element_blank(), axis.ticks.x = element_blank(),
        plot.title = element_text(size = 10),
        axis.title = element_text(size = 9))

grid.arrange(p1, p2, ncol = 2, widths = c(2, 1))
```

**Interpretation:** Ages range from 15-22 years with mean=16.70, median=17, mode=16, and SD=1.28. The distribution is slightly right-skewed with most students in the typical 15-18 age range. Older students (19-22) may have repeated grades. The IQR of 2 years confirms low variability, with potential outliers at the upper end.

# Bivariate Analysis (Raju): Medu vs G3

## Descriptive Statistics

```{r raju-bivariate-stats}
bivariate_stats <- df %>% group_by(Medu) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), SD = round(sd(G3), 2), .groups = "drop")
kable(bivariate_stats, caption = "Final Grade (G3) Statistics by Mother's Education Level")
```

```{r raju-bivariate-corr, results='asis'}
spearman_cor <- cor(df$Medu, df$G3, method = "spearman")
cat("Spearman correlation: r =", round(spearman_cor, 3), "  \n")
```

## Visualization

```{r raju-bivariate-plot, fig.width=6, fig.height=3, fig.pos='H', fig.cap="Boxplot of Final Grades by Mother's Education Level"}
ggplot(df, aes(x = factor(Medu), y = G3, fill = factor(Medu))) +
  geom_boxplot() +
  scale_fill_brewer(palette = "Blues") +
  scale_x_discrete(labels = c("0:None", "1:Primary", "2:5th-9th", "3:Secondary", "4:Higher")) +
  labs(title = "Final Grade by Mother's Education",
       subtitle = paste("Spearman r =", round(spearman_cor, 3)),
       x = "Mother's Education", y = "Final Grade (G3)") +
  theme_minimal() +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 30, hjust = 1),
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
```

**Interpretation:** Spearman correlation r=0.225 indicates a weak positive relationship between mother's education and final grades. The high mean for Medu=0 (13.0) is a small sample artifact (n=3). Excluding this group, grades increase consistently from 8.68 (primary) to 11.76 (higher education), suggesting mother's education is a meaningful predictor of student performance.

# Bivariate Analysis (Hrusheekesh): Study Time vs G3

## Descriptive Statistics

```{r hrush-studytime-stats}
df$studytime_ordered <- factor(df$studytime, 
                       levels = c(1, 2, 3, 4),
                       labels = c("<2 hours", "2-5 hours", "5-10 hours", ">10 hours"))

studytime_grade_stats <- df %>% group_by(studytime_ordered) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), Median_G3 = median(G3), SD = round(sd(G3), 2), .groups = "drop")
kable(studytime_grade_stats, caption = "Final Grade Statistics by Weekly Study Time", col.names = c("Study Time", "n", "Mean G3", "Median G3", "SD"))
```

```{r hrush-studytime-corr, results='asis'}
spearman_studytime <- cor(df$studytime, df$G3, method = "spearman")
cat("Spearman correlation: r =", round(spearman_studytime, 3), "  \n")
```

## Visualization

```{r hrush-studytime-plot, fig.width=6, fig.height=3, fig.pos='H', fig.cap="Final Grade distribution by Study Time with variable box width proportional to sample size"}
ggplot(df, aes(x = studytime_ordered, y = G3, fill = studytime_ordered)) +
  geom_boxplot(varwidth = TRUE, outlier.colour = "red", alpha = 0.7) +
  geom_jitter(color = "black", size = 0.3, alpha = 0.2, width = 0.1) +
  labs(title = "Final Grade Distribution by Weekly Study Time",
       subtitle = paste("Spearman r =", round(spearman_studytime, 3)),
       x = "Weekly Study Time", y = "Final Grade (G3)") +
  theme_minimal() +
  scale_fill_brewer(palette = "Pastel1") +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = 20, hjust = 1),
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
```

**Interpretation:** Spearman correlation r=`r round(spearman_studytime, 3)` indicates a moderate positive relationship between study time and final grades. Students studying 5-10 hours weekly achieve the highest mean grade (12.61), followed closely by those studying >10 hours (11.64). Students studying <2 hours have the lowest mean (9.13). The variable box width reveals most students (n=197) study 2-5 hours weekly, while only 27 dedicate >10 hours. This suggests study time is a meaningful predictor of academic performance, though extreme study hours may reflect diminishing returns or be associated with students needing remedial support.

# Bivariate Analysis (Hrusheekesh): Failures vs Absences

## Descriptive Statistics

```{r hrush-failures-stats}
failures_absence_stats <- df %>% group_by(failures) %>%
  summarise(n = n(), Mean_Abs = round(mean(absences), 2), Median_Abs = median(absences), SD = round(sd(absences), 2), .groups = "drop")
kable(failures_absence_stats, caption = "Absence Statistics by Number of Past Failures")
```

```{r hrush-failures-corr, results='asis'}
spearman_failures <- cor(df$failures, df$absences, method = "spearman")
cat("Spearman correlation: r =", round(spearman_failures, 3), "  \n")
```

## Visualization

```{r hrush-failures-plot, fig.width=6, fig.height=3, fig.pos='H', fig.cap="Distribution of absences by past class failures showing positive relationship"}
df$failures_factor <- as.factor(df$failures)
ggplot(df, aes(x = failures_factor, y = absences, fill = failures_factor)) +
  geom_boxplot(outlier.colour = "red", alpha = 0.6) +
  geom_jitter(width = 0.2, alpha = 0.2, size = 0.4) +
  geom_hline(yintercept = median(df$absences), linetype = "dashed", color = "blue", size = 0.8) +
  labs(title = "School Absences vs. Past Class Failures",
       subtitle = paste("Spearman r =", round(spearman_failures, 3), "| Blue line = overall median absences"),
       x = "Number of Past Class Failures", y = "Number of School Absences") +
  theme_minimal() +
  scale_fill_brewer(palette = "YlOrRd") +
  theme(legend.position = "none",
        plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9))
```

**Interpretation:** Spearman correlation r=`r round(spearman_failures, 3)` reveals a weak positive relationship between past failures and absences. Students with no failures average 5.23 absences (median=4), while those with 3 failures average 8.18 absences (median=2). However, high variability (SD ranges 7.49-10.49) and numerous outliers suggest the relationship is not deterministic. The dashed blue line (overall median=4) shows that most failure groups cluster near typical absence levels, indicating factors beyond simple attendance contribute to academic failure.

# Bivariate Analysis (Hrusheekesh): Paid Classes vs G3

## Descriptive Statistics

```{r hrush-paid-stats}
df$paid_labeled <- factor(df$paid, levels = c("no", "yes"), labels = c("No", "Yes"))
paid_grade_stats <- df %>% group_by(paid_labeled) %>%
  summarise(n = n(), Mean_G3 = round(mean(G3), 2), Median_G3 = median(G3), SD = round(sd(G3), 2), .groups = "drop")
kable(paid_grade_stats, caption = "Final Grade Statistics by Extra Paid Classes Enrollment", col.names = c("Paid Classes", "n", "Mean G3", "Median G3", "SD"))
```

```{r hrush-paid-test, results='asis'}
t_test_result <- t.test(G3 ~ paid, data = df)
cat("Two-sample t-test: t =", round(t_test_result$statistic, 3), ", p-value =", round(t_test_result$p.value, 4), "  \n")
```

## Visualization

```{r hrush-paid-plot, fig.width=6, fig.height=3, fig.pos='H', fig.cap="Density distribution comparing final grades with and without extra paid classes"}
mean_by_paid <- aggregate(G3 ~ paid_labeled, df, mean)
ggplot(df, aes(x = G3, fill = paid_labeled)) +
  geom_density(alpha = 0.5) +
  geom_vline(data = mean_by_paid, aes(xintercept = G3, color = paid_labeled), 
             linetype = "dashed", size = 1) +
  labs(title = "Impact of Extra Paid Classes on Final Grade",
       subtitle = paste("t-test p =", round(t_test_result$p.value, 4)),
       x = "Final Grade (G3)", y = "Density",
       fill = "Paid Classes", color = "Mean by Group") +
  theme_minimal() +
  scale_fill_manual(values = c("No" = "#E41A1C", "Yes" = "#377EB8")) +
  scale_color_manual(values = c("No" = "#E41A1C", "Yes" = "#377EB8")) +
  theme(plot.title = element_text(size = 10),
        plot.subtitle = element_text(size = 8),
        axis.title = element_text(size = 9),
        legend.title = element_text(size = 9))
```

**Interpretation:** Students without paid classes have a slightly higher mean grade (10.75) compared to those with paid classes (9.90), a difference of 0.85 points. The t-test (p=`r round(t_test_result$p.value, 4)`) suggests this difference is marginally significant. However, this counterintuitive finding likely reflects selection bias: students struggling academically are more likely to enroll in paid classes for remedial support. The density plot shows substantial overlap between distributions, indicating paid classes do not universally improve performance and may serve students who are already behind.

# Literature

<div id="refs"></div>

# Appendix

## System Information

```{r sessionInfo}
sessionInfo()
```
